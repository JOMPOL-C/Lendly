<%- include('includes/head') %>
    <link rel="stylesheet" href="/styles/rental.css">
    </head>

    <body>
        <%- include('includes/nav') %>

            <main>
                <section class="index">
                    <h2>‡πÄ‡∏ä‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>

                    <!-- üîπ ‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏°‡∏ô‡∏π -->
                    <div class="tabs">
                        <a href="#" class="active" onclick="openTab(event, 'waiting_confirm', this)">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</a>
                        <a href="#" onclick="openTab(event, 'waiting_deliver', this)">‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</a>
                        <a href="#" onclick="openTab(event, 'waiting_receive', this)">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</a>
                        <a href="#" onclick="openTab(event, 'renting', this)">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</a>
                        <a href="#" onclick="openTab(event, 'returned', this)">‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß</a>
                        <a href="#" onclick="openTab(event, 'cancelled', this)">‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ / ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</a>
                    </div>

                    <!-- üî∏ ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
                    <div id="waiting_confirm" class="tab-content" style="display:block">
                        <% const confirmOrders=waiting_confirm || []; %>
                            <% if (confirmOrders.length> 0) { %>
                                <% confirmOrders.forEach(order=> { %>
                                    <div class="order-card">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api/Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- üî∏ ‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á -->
                    <div id="waiting_deliver" class="tab-content" style="display:none">
                        <% const deliverOrders=waiting_deliver || []; %>
                            <% if (deliverOrders.length> 0) { %>
                                <% deliverOrders.forEach(order=> { %>
                                    <div class="order-card">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api/Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- üî∏ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á -->
                    <div id="waiting_receive" class="tab-content" style="display:none">
                        <% const receiveOrders=waiting_receive || []; %>
                            <% if (receiveOrders.length> 0) { %>
                                <% receiveOrders.forEach(order=> { %>
                                    <div class="order-card">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api/Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
                                            </div>
                                            <% } %>
                    </div>


                    <!-- üî∏ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤ -->
                    <div id="renting" class="tab-content" style="display:none">
                        <% const rentingOrders=renting || []; %>
                            <% if (rentingOrders.length> 0) { %>
                                <% rentingOrders.forEach(order=> { %>
                                    <div class="order-card">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api/Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- üî∏ ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß -->
                    <div id="returned" class="tab-content" style="display:none">
                        <% const returnedOrders=returned || []; %>
                            <% if (returnedOrders.length> 0) { %>
                                <% returnedOrders.forEach(order=> { %>
                                    <div class="order-card">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status" >‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚úÖ</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api/Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- üî∏ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å / ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ -->
                    <div id="cancelled" class="tab-content" style="display:none">
                        <% const cancelOrders=cancelled || []; %>
                            <% if (cancelOrders.length> 0) { %>
                                <% cancelOrders.forEach(order=> { %>
                                    <div class="order-card problem">
                                        <h3>‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <%= order.order_code %>
                                        </h3>
                                        <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á: <%= new Date(order.created_at).toLocaleDateString("th-TH") %>
                                        </p>
                                        <p class="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å / ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‚ùå</p>

                                        <% order.Rentals.forEach(rental=> { %>
                                            <div class="rental-card">
                                                <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                                    alt="">
                                                <div class="rental-info">
                                                    <h4>
                                                        <%= rental.product?.product_name %>
                                                    </h4>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new
                                                            Date(rental.rental_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                    <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new
                                                            Date(rental.rental_end_date).toLocaleDateString("th-TH") %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% }) %>

                                                <div class="order-footer">
                                                    <a href="/api   /Detail_Ren?order_id=<%= order.order_id %>"
                                                        class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                                </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
                                            </div>
                                            <% } %>
                    </div>
                </section>
            </main>

            <%- include('includes/footer') %>
                <script src="/js/script.js"></script>

                <script>
                    function openTab(event, tabId, el) {
                        event.preventDefault();
                        document.querySelectorAll('.tab-content').forEach(div => div.style.display = 'none');
                        document.querySelectorAll('.tabs a').forEach(a => a.classList.remove('active'));
                        document.getElementById(tabId).style.display = 'block';
                        el.classList.add('active');
                    }
                </script>
    </body>

    </html>