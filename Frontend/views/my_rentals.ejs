<%- include('includes/head') %>
    <link rel="stylesheet" href="/styles/rental.css">
    </head>

    <body>
        <%- include('includes/nav') %>

            <main>
                <section class="index">
                    <h2>‡πÄ‡∏ä‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>

                    <!-- üîπ ‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏°‡∏ô‡∏π -->
                    <div class="tabs">
                        <a href="#" class="active" onclick="openTab(event, 'waiting_confirm', this)">‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</a>
                        <a href="#" onclick="openTab(event, 'waiting_deliver', this)">‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</a>
                        <a href="#" onclick="openTab(event, 'renting', this)">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</a>
                        <a href="#" onclick="openTab(event, 'returned', this)">‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß</a>
                        <a href="#" onclick="openTab(event, 'cancelled', this)">‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ / ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</a>
                    </div>

                    <!-- ‚úÖ ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
                    <div id="waiting_confirm" class="tab-content" style="display:block">
                        <% const confirmList=waiting_confirm || []; %>
                            <% if (confirmList.length> 0) { %>
                                <% confirmList.forEach(rental=> { %>
                                    <div class="rental-card">
                                        <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                            alt="">
                                        <div class="rental-info">
                                            <h3>
                                                <%= rental.product?.product_name %>
                                            </h3>
                                            <p class="status waiting">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô</p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new Date(rental.rental_date).toLocaleDateString() %>
                                            </p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new Date(rental.rental_end_date).toLocaleDateString() %>
                                            </p>
                                            <a href="/Detail_Ren?rental_id=<%= rental.rental_id %>"
                                                class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- ‚úÖ ‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á -->
                    <div id="waiting_deliver" class="tab-content" style="display:none">
                        <% const deliverList=waiting_deliver || []; %>
                            <% if (deliverList.length> 0) { %>
                                <% deliverList.forEach(rental=> { %>
                                    <div class="rental-card">
                                        <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                            alt="">
                                        <div class="rental-info">
                                            <h3>
                                                <%= rental.product?.product_name %>
                                            </h3>
                                            <p class="status waiting">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new Date(rental.rental_date).toLocaleDateString() %>
                                            </p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new Date(rental.rental_end_date).toLocaleDateString() %>
                                            </p>
                                            <a href="/Detail_Ren?rental_id=<%= rental.rental_id %>"
                                                class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- ‚úÖ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤ -->
                    <div id="renting" class="tab-content" style="display:none">
                        <% const rentingList=renting || []; %>
                            <% if (rentingList.length> 0) { %>
                                <% rentingList.forEach(rental=> { %>
                                    <div class="rental-card">
                                        <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                            alt="">
                                        <div class="rental-info">
                                            <h3>
                                                <%= rental.product?.product_name %>
                                            </h3>
                                            <p class="status active">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new Date(rental.rental_date).toLocaleDateString() %>
                                            </p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new Date(rental.rental_end_date).toLocaleDateString() %>
                                            </p>
                                            <a href="/Detail_Ren?rental_id=<%= rental.rental_id %>"
                                                class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏≤</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- ‚úÖ ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß -->
                    <div id="returned" class="tab-content" style="display:none">
                        <% const returnedList=returned || []; %>
                            <% if (returnedList.length> 0) { %>
                                <% returnedList.forEach(rental=> { %>
                                    <div class="rental-card">
                                        <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                            alt="">
                                        <div class="rental-info">
                                            <h3>
                                                <%= rental.product?.product_name %>
                                            </h3>
                                            <p class="status done">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚úÖ</p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new Date(rental.rental_date).toLocaleDateString() %>
                                            </p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new Date(rental.rental_end_date).toLocaleDateString() %>
                                            </p>
                                            <a href="/Detail_Ren?rental_id=<%= rental.rental_id %>"
                                                class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß</p>
                                            </div>
                                            <% } %>
                    </div>

                    <!-- ‚úÖ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å / ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ -->
                    <div id="cancelled" class="tab-content" style="display:none">
                        <% const cancelList=cancelled || []; %>
                            <% if (cancelList.length> 0) { %>
                                <% cancelList.forEach(rental=> { %>
                                    <div class="rental-card problem">
                                        <img src="<%= rental.product?.images?.[0]?.image_url || '/images/no-image.png' %>"
                                            alt="">
                                        <div class="rental-info">
                                            <h3>
                                                <%= rental.product?.product_name %>
                                            </h3>
                                            <p class="status cancelled">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å / ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‚ùå</p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤: <%= new Date(rental.rental_date).toLocaleDateString() %>
                                            </p>
                                            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô: <%= new Date(rental.rental_end_date).toLocaleDateString() %>
                                            </p>
                                            <a href="/Detail_Ren?rental_id=<%= rental.rental_id %>"
                                                class="btn">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</a>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <div class="empty-state">
                                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</p>
                                            </div>
                                            <% } %>
                    </div>
                </section>
            </main>

            <%- include('includes/footer') %>
                <script src="/js/script.js"></script>

                <script>
                    function openTab(event, tabId, el) {
                        event.preventDefault();
                        document.querySelectorAll('.tab-content').forEach(div => div.style.display = 'none');
                        document.querySelectorAll('.tabs a').forEach(a => a.classList.remove('active'));
                        document.getElementById(tabId).style.display = 'block';
                        el.classList.add('active');
                    }
                </script>
    </body>

    </html>