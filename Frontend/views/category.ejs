<%- include('includes/head') %>
    <link rel="stylesheet" href="/styles/category.css">
    </head>

    <body>
        <%- include('includes/nav') %>
            <main>
                <section class="index-category">
                    <p>หมวดหมู่</p>

                    <% if (categories && categories.length> 0) { %>
                        <% categories.forEach(cat=> { %>
                            <a href="/category/<%= cat.category_id %>" class="index-category-box">
                                <h3>
                                    <%= cat.category_name %>
                                </h3>
                            </a>
                            <% }) %>
                                <% } else { %>
                                    <p>ยังไม่มีหมวดหมู่ในระบบ</p>
                                    <% } %>
                </section>

                <section id="all_product" class="section-p1 product1">
                    <h2>ชุดทั้งหมด</h2>
                    <p>สามารถดูแต่ละหมวดหมู่ได้ที่หมวดหมู่</p>
                  
                    <div class="pro-container">
                      <% if (products && products.length > 0) { %>
                        <% products.forEach(p => { %>
                          <div class="pro">
                            <a href="/api/products/<%= p.product_id %>">
                              <% if (p.images.length > 0) { %>
                                <img src="<%= p.images[0].image_url %>" alt="<%= p.product_name %>">
                              <% } else { %>
                                <img src="/images/no-image.png" alt="no image">
                              <% } %>
                            </a>
                            <div class="des">
                              <span><%= p.category ? p.category.category_name : '' %></span>
                              <h5><%= p.product_name %></h5>
                              <% if (p.prices.length > 0) { %>
                                <h4><%= p.prices[0].price_test %>฿ / <%= p.prices[0].price_pri %>฿</h4>
                              <% } else { %>
                                <h4>ไม่มีราคา</h4>
                              <% } %>
                            </div>
                            <div class="btn-pro">
                              <a href="#"><i class='bx bx-heart btn'></i></a>
                              <a href="#"><i class='bx bx-cart btn'></i></a>
                            </div>
                          </div>
                        <% }) %>
                      <% } else { %>
                        <p>ยังไม่มีสินค้าในระบบ</p>
                      <% } %>
                    </div>
                  </section>
                  
            </main>
            <%- include('includes/footer') %>
                <script src="/js/script.js"></script>
                    
    </body>

    </html>